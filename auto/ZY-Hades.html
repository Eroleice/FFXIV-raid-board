<html>
<style>
html {
	font-size: 12px;
	color: white;
	text-shadow: .1rem 0rem .3rem blue,-.1rem 0rem .3rem blue,0rem .1rem .3rem blue,0rem -.1rem .3rem blue;
}
table {
	width: 100%;
	border:1px solid white;
	font-size: 12px;
}
td {
	text-align: center;
	border:1px solid white;
}
td:hover{
	background-color: black;
}
.position table{
	border: 0px;
}
.position td{
	border: 0px;
}
.timeline {
	margin-left: 10px;
}
</style>
<body>
<table id='p1'>
	<tbody>
		<tr>
			<td colspan="2" style="width:100%;">P1</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td style="width:33%">D3</td><td style="width:33%">MT</td><td style="width:33%">D4</td>
 						</tr>
						<tr>
							<td style="width:33%">ST</td><td style="width:33%">BOSS</td><td style="width:33%">D2</td>
						</tr>
						<tr>
							<td style="width:33%">H1</td><td style="width:33%">D1</td><td style="width:33%">H2</td>
						</tr>
					</table>
				</div>
			</td>
			<td style="width:55%;text-align:left;">
				<div class="timeline">
					■ 2连暗影扩散<br>
					■ 2连失信<br>
					■ 死刑（MT无敌）<br>
					■ 镜子/黑球<br>
					■ 背信<br>
					■ 黑球/镜子<br>
					■ 2连暗影扩散<br>
					■ 2连失信<br>
					■ 死刑（换T）<br>
					■ 10%转阶段
				</div>
			</td>
		</tr>
	</tbody>
</table>
<table id='p2' style="display:none">
	<tbody>
		<tr>
			<td colspan="2" style="width:100%;">P2</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td style="width:33%">D</td><td style="width:33%">D</td><td style="width:33%">MT</td>
 						</tr>
						<tr>
							<td style="width:33%"> </td><td style="width:33%">BOSS</td><td style="width:33%"> </td>
						</tr>
						<tr>
							<td style="width:33%">ST</td><td style="width:33%">D</td><td style="width:33%">D</td>
						</tr>
					</table>
				</div>
			</td>
			<td rowspan="2" style="width:55%;text-align:left;">
				<div class="timeline">
					■ 双T踩塔（4塔）<br>
					■ DPS引导连线<br>
					■ 左右分摊+双T远离
				</div>
			</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td style="width:50%">D1/D3/H1</td><td style="width:50%">D2/D4/H2</td>
 						</tr>
					</table>
				</div>
			</td>
		</tr>
	</tbody>
</table>
<table id='p3' style="display:none">
	<tbody>
		<tr>
			<td colspan="2" style="width:100%;">P3</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td colspan="2">坦克接线</td>
 						</tr>
						<tr>
							<td style="width:50%">火Buff坦</td><td style="width:50%">冰Buff坦</td>
						</tr>
						<tr>
							<td colspan="2">治疗接线</td>
						</tr>
					</table>
				</div>
			</td>
			<td style="width:55%;text-align:left;">
				<div class="timeline">
					■ 冰火魔法阵<br>
					■ 连线+坦克死刑<br>
					■ 冰火魔法阵<br>
					■ 2连死刑
				</div>
			</td>
		</tr>
	</tbody>
</table>
<table id='p4' style="display:none">
	<tbody>
		<tr>
			<td colspan="2" style="width:100%;">P4</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td colspan="3">D4/MT</td>
 						</tr>
						<tr>
							<td style="width:33%">D3/H1</td><td style="width:33%">BOSS</td><td style="width:33%">H2/D2</td>
						</tr>
						<tr>
							<td colspan="3">D1/ST</td>
						</tr>
					</table>
				</div>
			</td>
			<td rowspan="2" style="width:55%;text-align:left;">
				<div class="timeline">
					■ 法则变更（奶TH）<br>
					■ 枯萎病（aoe流血）<br>
					■ 死刑（ST无敌）<br>
					■ 左右分摊<br>
					■ 暗影核爆<br>
					■ 古火爆发<br>
					■ 2连暗影核爆
				</div>
			</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td style="width:50%;">D1/D3<br>H1/ST</td><td style="width:50%">D2/D4<br>H2/MT</td>
 						</tr>
					</table>
				</div>
			</td>
		</tr>
	</tbody>
</table>
<table id='p5' style="display:none">
	<tbody>
		<tr>
			<td colspan="2" style="width:100%;">P5</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td style="width:33%">H1</td><td style="width:33%">MT</td><td style="width:33%"> </td>
 						</tr>
						<tr>
							<td style="width:33%"> </td><td style="width:33%"> </td><td style="width:33%"> </td>
						</tr>
						<tr>
							<td style="width:33%"> </td><td style="width:33%">ST</td><td style="width:33%">H2</td>
						</tr>
					</table>
				</div>
			</td>
			<td rowspan="3" style="width:55%;text-align:left;">
				<div class="timeline">
					■ 尊严王（踩塔+囚禁）<br>
					■ 殉道者（击退分担）<br>
					■ 祭祀（3连分摊诱导）<br>
					■ 中间/两侧AOE<br>
					■ 两侧/中间AOE
				</div>
			</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td style="width:33%">D1</td><td style="width:33%"> </td><td style="width:33%">D2</td>
 						</tr>
						<tr>
							<td style="width:33%">ST/H1</td><td style="width:33%"> </td><td style="width:33%">MT/H2</td>
						</tr>
						<tr>
							<td style="width:33%">D3</td><td style="width:33%"> </td><td style="width:33%">D4</td>
						</tr>
					</table>
				</div>
			</td>
		</tr>
				<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td style="width:50%">D1/H1/ST</td><td style="width:50%">D2/H2/MT</td>
 						</tr>
						<tr>
							<td style="width:50%">D3</td><td style="width:50%">D4</td>
						</tr>
					</table>
				</div>
			</td>
		</tr>
	</tbody>
</table>
<table id='p7' style="display:none">
	<tbody>
		<tr>
			<td colspan="2" style="width:100%;">P7</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td style="width:50%">ST</td><td style="width:50%">MT</td>
 						</tr>
					</table>
				</div>
			</td>
			<td style="width:55%;text-align:left;">
				<div class="timeline">
					■ 地火<br>
					■ 踩塔AOE<br>
					■ 地火<br>
					■ 踩塔AOE<br>
					■ 读条狂暴
				</div>
			</td>
		</tr>
	</tbody>
</table>
</body>
<script src="./resources/common.js"></script>
<script>
'use strict';

addOverlayListener('onLogEvent', function(e) {
  for (let i = 0; i < e.detail.logs.length; i++) {
    if (e.detail.logs[i].match('\u4f7f\u51fa\u4f60\u7684\u5168\u529b\u5427')) {
		phase('p1');
    } else if (e.detail.logs[i].match('\u6ca1\u7528\u7684\u5e9f\u7269')) {
		phase('p2');
	} else if (e.detail.logs[i].match('\u6df1\u6e0a\u7684\u796d\u53f8\u548c\u5df2\u901d\u7684\u6b89\u6559\u8005\u5440')) {
		phase('p3');
	} else if (e.detail.logs[i].match('\u8d85\u8d8a\u8089\u4f53\u4e0e\u7075\u9b42\u7684\u5883\u754c')) {
		phase('p4');
	} else if (e.detail.logs[i].match('\u610f\u5fd7\u7684\u6bd4\u62fc\u4e86')) {
		phase('p5');
	} else if (e.detail.logs[i].match('\u54c8\u8fea\u65af\u5728\u6b64\u4e0b\u4ee4')) {
		phase('p7');
	} else if (e.detail.logs[i].match('40000012')) {
		phase('p1');
	}
  }
});

callOverlayHandler({ call: 'cactbotRequestState' });

function phase(p){
	document.getElementById("p1").style.display="none";
	document.getElementById("p2").style.display="none";
	document.getElementById("p3").style.display="none";
	document.getElementById("p4").style.display="none";
	document.getElementById("p5").style.display="none";
	document.getElementById("p7").style.display="none";
	document.getElementById(p).style.display="";
}
</script>
</html>
