<html>
<style>
html {
	font-size: 12px;
	color: white;
	text-shadow: .1rem 0rem .3rem blue,-.1rem 0rem .3rem blue,0rem .1rem .3rem blue,0rem -.1rem .3rem blue;
}
table {
	width: 100%;
	border:1px solid white;
	font-size: 12px;
}
td {
	text-align: center;
	border:1px solid white;
}
td:hover{
	background-color: black;
}
.position table{
	border: 0px;
}
.position td{
	border: 0px;
}
.timeline {
	margin-left: 10px;
}
</style>
<body>
<table id='p1' style="display:;">
	<tbody>
		<tr>
			<td colspan="2" style="width:100%;">P1</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td colspan="3" style="width:100%">八方剑/踩光柱</td>
						</tr>
						<tr>
							<td style="width:33%">D3</td><td style="width:33%">MT</td><td style="width:33%">D4</td>
 						</tr>
						<tr>
							<td style="width:33%">ST</td><td style="width:33%">BOSS</td><td style="width:33%">D2</td>
						</tr>
						<tr>
							<td style="width:33%">H1</td><td style="width:33%">D1</td><td style="width:33%">H2</td>
						</tr>
					</table>
				</div>
			</td>
			<td rowspan="3" style="width:55%;text-align:left;">
				<div class="timeline">
					■ 八方剑<br>
					■ 分摊<br>
					■ 前后/月环<br>
					■ 踩光柱<br>
					■ 延时分散生效<br>
					■ 1血+分摊+石化<br>
					■ 双T死刑<br>
					■ 全屏AOE<br>
					■ 橙色手（去西侧）<br>
					■ 前后剑<br>
					■ 月环+黑色手（击退）<br>
					■ 八方剑<br>
					■ 双T死刑<br>
					■ 全屏AOE<br>
					■ 核爆（去角落）<br>
					■ 1血+踩光柱+石化<br>
					■ 双T死刑<br>
					■ 全屏AOE<br>
					■ 黑白配<br>
					■ 八方剑+分摊<br>
					■ 前后/月环
				</div>
			</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td colspan="3" style="width:100%">核爆</td>
						</tr>
						<tr>
							<td style="width:33%">T</td><td style="width:33%"> </td><td style="width:33%"> </td>
 						</tr>
						<tr>
							<td style="width:33%"> </td><td style="width:33%">BOSS</td><td style="width:33%"> </td>
						</tr>
						<tr>
							<td style="width:33%">D</td><td style="width:33%"> </td><td style="width:33%">H</td>
						</tr>
					</table>
				</div>
			</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td colspan="3" style="width:100%">黑白配</td>
						</tr>
						<tr>
							<td style="width:33%"> </td><td style="width:33%">MT/D4</td><td style="width:33%"> </td>
 						</tr>
						<tr>
							<td style="width:33%">ST/D3</td><td style="width:33%">BOSS</td><td style="width:33%">D2/H2</td>
						</tr>
						<tr>
							<td style="width:33%"></td><td style="width:33%">D1/H1</td><td style="width:33%"></td>
						</tr>
					</table>
				</div>
			</td>
		</tr>
	</tbody>
</table>
<table id='p2' style="display:none;">
	<tbody>
		<tr>
			<td colspan="2" style="width:100%;">P2</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td colspan="3" style="width:100%">八方剑/踩光柱</td>
						</tr>
						<tr>
							<td style="width:33%">D3</td><td style="width:33%">MT</td><td style="width:33%">D4</td>
 						</tr>
						<tr>
							<td style="width:33%">ST</td><td style="width:33%">BOSS</td><td style="width:33%">D2</td>
						</tr>
						<tr>
							<td style="width:33%">H1</td><td style="width:33%">D1</td><td style="width:33%">H2</td>
						</tr>
					</table>
				</div>
			</td>
			<td rowspan="3" style="width:55%;text-align:left;">
				<div class="timeline">
					■ 双T死刑<br>
					■ 全屏AOE<br>
					■ 黑/橙色手<br>
					■ 延时核爆①生效<br>
					■ 分摊生效<br>
					■ 双T死刑<br>
					■ 核爆②生效+石化<br>
					■ 分散<br>
					■ 黑白配+踩光柱<br>
					■ 八方剑<br>
					■ 双T死刑
				</div>
			</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td colspan="3" style="width:100%">核爆</td>
						</tr>
						<tr>
							<td style="width:33%">T</td><td style="width:33%"> </td><td style="width:33%"> </td>
 						</tr>
						<tr>
							<td style="width:33%"> </td><td style="width:33%">BOSS</td><td style="width:33%"> </td>
						</tr>
						<tr>
							<td style="width:33%">D</td><td style="width:33%"> </td><td style="width:33%">H</td>
						</tr>
					</table>
				</div>
			</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td colspan="3" style="width:100%">黑白配</td>
						</tr>
						<tr>
							<td style="width:33%"> </td><td style="width:33%">MT/D4</td><td style="width:33%"> </td>
 						</tr>
						<tr>
							<td style="width:33%">ST/D3</td><td style="width:33%">BOSS</td><td style="width:33%">D2/H2</td>
						</tr>
						<tr>
							<td style="width:33%"></td><td style="width:33%">D1/H1</td><td style="width:33%"></td>
						</tr>
					</table>
				</div>
			</td>
		</tr>
	</tbody>
</table>
<table id='p3' style="display:none;">
	<tbody>
		<tr>
			<td colspan="2" style="width:100%;">P3</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td colspan="3" style="width:100%">八方剑</td>
						</tr>
						<tr>
							<td style="width:33%">D3</td><td style="width:33%">MT</td><td style="width:33%">D4</td>
 						</tr>
						<tr>
							<td style="width:33%">ST</td><td style="width:33%">BOSS</td><td style="width:33%">D2</td>
						</tr>
						<tr>
							<td style="width:33%">H1</td><td style="width:33%">D1</td><td style="width:33%">H2</td>
						</tr>
					</table>
				</div>
			</td>
			<td rowspan="2" style="width:55%;text-align:left;">
				<div class="timeline">
					■ AOE<br>
					■ 复仇/混沌<br>
					■ 混沌/复仇<br>
					■ AOE<br>
					■ 复仇/混沌<br>
					■ AOE * 4<br>
					■ AOE狂暴
				</div>
			</td>
		</tr>
		<tr>
			<td style="width:45%">
				<div class='position'>
					<table>
						<tr>
							<td style="width:100%">复仇：近 - 散 - 侧</td>
 						</tr>
						<tr>
							<td style="width:100%">混沌：侧 - 近 - 散</td>
						</tr>
					</table>
				</div>
			</td>
		</tr>
	</tbody>
</table>
</body>
<script src="./resources/common.js"></script>
<script>
'use strict';

var stage = "p1";

addOverlayListener('onLogEvent', function(e) {
  for (let i = 0; i < e.detail.logs.length; i++) {
    if (e.detail.logs[i].match('\u53ef\u6076\u7684\u5149\u4e4b\u529b')) {
		phase('p1');
		stage = "p1";
    } else if (stage === "p1" && e.detail.logs[i].match('\u88ab\u5149\u8292\u6240\u8ff7\u60d1\u7684\u5bb6\u4f19')) {
		phase('p2');
		stage = "p2";
	} else if (stage === "p2" && e.detail.logs[i].match('\u638c\u7ba1\u6df7\u6c8c\u7684\u6697\u4e4b\u529b')) {
		phase('p3');
		stage = "p3";
	} else if (e.detail.logs[i].match('40000012')) {
		phase('p1');
		stage = "p1";
	} else if (e.detail.logs[i].match('\u4efb\u52a1\u7ed3\u675f\u4e86')) {
		phase('p1');
		stage = "p1";
	}
  }
});

callOverlayHandler({ call: 'cactbotRequestState' });

function phase(p){
	document.getElementById("p1").style.display="none";
	document.getElementById("p2").style.display="none";
	document.getElementById("p3").style.display="none";
	document.getElementById(p).style.display="";
}
</script>
</html>